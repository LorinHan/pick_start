(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{373:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a(23)),s=E(a(44)),l=E(a(56)),u=E(a(132)),o=E(a(247)),f=E(a(251)),r=E(a(26)),c=E(a(10)),i=E(a(12)),d=E(a(3)),h=E(a(5)),p=E(a(2)),m=E(a(4));a(24),a(45),a(57),a(133),a(252),a(256),a(27);var g=E(a(0)),v=a(21),C=E(a(14));E(a(68));function E(e){return e&&e.__esModule?e:{default:e}}var I=function(e){function t(){(0,d.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.handleChange=function(t,a){e.setState((0,c.default)({},t,a))},e.onChange=function(t,a,n){e.setState({files:t})},e.onSegChange=function(t){var a=t.nativeEvent.selectedSegmentIndex;e.setState({multiple:1===a})},e.goodsPost=function(){if(0===e.state.files.length)return r.default.fail("请上传交易物品图片",2);if(""===e.state.name)return r.default.fail("请填写商品名称",1);if(""===e.state.desc)return r.default.fail("请填写商品描述",1);if(""===e.state.price)return r.default.fail("请填写商品价格",1);if(""===e.state.address)return r.default.fail("请填写交易地点",1);var t=localStorage.getItem("user"),a=[];for(var n in e.state.name)a.push(e.state.name[n].charCodeAt());console.log(a);var s={headers:{"Content-Type":"multipart/form-data",name:a}},l=localStorage.getItem("school");C.default.post("/api/shopPut",{user:t,name:e.state.name,desc:e.state.desc,price:e.state.price,address:e.state.address,school:l}).then(function(t){r.default.loading("正在上传图片...",1),setTimeout(function(){for(var t in e.state.files){var a=new FormData;a.append("file",e.state.files[t].file,e.state.files[t].name),C.default.post("api/shopPut/img",a,s).then(function(e){if("上传失败"==e.data)return r.default.fail("图片上传失败",2);r.default.success("上传成功！",1)})}},1e3)})},e.state={files:[],multiple:!1,name:"",desc:"",price:"",address:""},e}return(0,m.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.files;return g.default.createElement("div",null,g.default.createElement(u.default,null,g.default.createElement(f.default,{values:["切换到单选","切换到多选"],selectedIndex:this.state.multiple?1:0,onChange:this.onSegChange}),g.default.createElement(o.default,{files:t,onChange:this.onChange,onImageClick:function(e,t){return console.log(e,t)},selectable:t.length<7,multiple:this.state.multiple})),g.default.createElement(l.default,null),g.default.createElement(s.default,{value:this.state.name,onChange:function(t){return e.handleChange("name",t)}},"商品名称"),g.default.createElement(l.default,null),g.default.createElement(s.default,{value:this.state.desc,onChange:function(t){return e.handleChange("desc",t)}},"商品描述"),g.default.createElement(l.default,null),g.default.createElement(s.default,{value:this.state.price,onChange:function(t){return e.handleChange("price",t)}},"价格"),g.default.createElement(l.default,null),g.default.createElement(s.default,{value:this.state.address,onChange:function(t){return e.handleChange("address",t)}},"交易地点"),g.default.createElement(l.default,null),g.default.createElement(n.default,{style:{backgroundColor:"rgb(252, 154, 0)",color:"#fff"},onClick:function(){return e.goodsPost()}},"提交"))}}]),t}(g.default.Component);t.default=(0,v.connect)(function(e){return{}},function(e){return{}})(I)},68:function(e,t){e.exports={shopBox:"src-css-shopList-shopBox-ee859",shopItem:"src-css-shopList-shopItem-bf1d6",shopPut:"src-css-shopList-shopPut-ddea1",getInfo:"src-css-shopList-getInfo-171ef",goodInfo:"src-css-shopList-goodInfo-dac96",title:"src-css-shopList-title-56a42",desc:"src-css-shopList-desc-baaaa",infoTable:"src-css-shopList-infoTable-357e6",chat:"src-css-shopList-chat-3c901",chatBox:"src-css-shopList-chatBox-f8f47"}}}]);